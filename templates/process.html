<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Process Image</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        h1, h2 { color: #333; }
        img { max-width: 100%; height: auto; margin-bottom: 20px; }
        form { margin-bottom: 20px; }
        input[type="submit"] { background-color: #4CAF50; color: white; padding: 10px 15px; border: none; cursor: pointer; margin-right: 10px; }
        input[type="number"], input[type="range"] { margin-bottom: 10px; }
        .flash { background-color: #f0f0f0; padding: 10px; margin-bottom: 20px; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>Process Image</h1>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="flash">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <img src="{{ url_for('uploaded_file', filename=filename) }}" alt="Uploaded image">
    
    <h2>Image Processing Options</h2>
    
    <form method="post">
        <input type="hidden" name="action" value="resize">
        <label for="scale">Resize (%): </label>
        <input type="number" name="scale" id="scale" min="1" max="200" value="100" required>
        <input type="submit" value="Resize">
    </form>

    <form method="post">
        <input type="hidden" name="action" value="rotate">
        <label for="angle">Rotate (degrees): </label>
        <input type="number" name="angle" id="angle" min="0" max="360" value="0" required>
        <input type="submit" value="Rotate">
    </form>

    <form method="post">
        <input type="hidden" name="action" value="invert">
        <input type="submit" value="Invert Colors">
    </form>

    <form method="post">
        <input type="hidden" name="action" value="blur">
        <label for="blur_radius">Blur Radius: </label>
        <input type="number" name="blur_radius" id="blur_radius" min="0" max="10" step="0.1" value="1" required>
        <input type="submit" value="Apply Blur">
    </form>

    <form method="post">
        <input type="hidden" name="action" value="sepia">
        <input type="submit" value="Apply Sepia">
    </form>

    <form method="post">
        <input type="hidden" name="action" value="black_white">
        <input type="submit" value="Convert to Black & White">
    </form>

    <form method="post">
        <input type="hidden" name="action" value="adjust">
        <label for="brightness">Brightness: </label>
        <input type="range" name="brightness" id="brightness" min="0" max="2" step="0.1" value="1" required>
        <br>
        <label for="contrast">Contrast: </label>
        <input type="range" name="contrast" id="contrast" min="0" max="2" step="0.1" value="1" required>
        <br>
        <input type="submit" value="Adjust Brightness & Contrast">
    </form>

    <form method="post">
        <input type="hidden" name="action" value="adjust_color">
        <label for="hue">Hue: </label>
        <input type="range" name="hue" id="hue" min="0" max="360" value="0" required>
        <br>
        <label for="saturation">Saturation: </label>
        <input type="range" name="saturation" id="saturation" min="0" max="2" step="0.1" value="1" required>
        <br>
        <label for="red">Red: </label>
        <input type="range" name="red" id="red" min="0" max="2" step="0.1" value="1" required>
        <br>
        <label for="green">Green: </label>
        <input type="range" name="green" id="green" min="0" max="2" step="0.1" value="1" required>
        <br>
        <label for="blue">Blue: </label>
        <input type="range" name="blue" id="blue" min="0" max="2" step="0.1" value="1" required>
        <br>
        <input type="submit" value="Adjust Color">
    </form>

    <form method="post">
        <input type="hidden" name="action" value="edge_detection">
        <input type="submit" value="Apply Edge Detection">
    </form>

    <p><a href="{{ url_for('index') }}">Upload a new image</a></p>
</body>
</html>