<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Process Image</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">Process Image</h1>
        
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-info">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="row">
            <div class="col-md-6">
                <img src="{{ url_for('uploaded_file', filename=filename) }}" class="img-fluid mb-3" alt="Uploaded image">
                <a href="/" class="btn btn-secondary">Upload New Image</a>
            </div>
            <div class="col-md-6">
                <div class="accordion" id="processingOptions">
                    <!-- Resize -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#resizeCollapse">
                                Resize
                            </button>
                        </h2>
                        <div id="resizeCollapse" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                <form method="post">
                                    <input type="hidden" name="action" value="resize">
                                    <div class="mb-3">
                                        <label for="scale" class="form-label">Scale Percentage:</label>
                                        <input type="number" class="form-control" id="scale" name="scale" value="100" min="1" max="200">
                                    </div>
                                    <button type="submit" class="btn btn-primary">Resize</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Rotate -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rotateCollapse">
                                Rotate
                            </button>
                        </h2>
                        <div id="rotateCollapse" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                <form method="post">
                                    <input type="hidden" name="action" value="rotate">
                                    <div class="mb-3">
                                        <label for="angle" class="form-label">Angle:</label>
                                        <input type="number" class="form-control" id="angle" name="angle" value="90" step="90">
                                    </div>
                                    <button type="submit" class="btn btn-primary">Rotate</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Simple Effects -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#effectsCollapse">
                                Simple Effects
                            </button>
                        </h2>
                        <div id="effectsCollapse" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                <form method="post" class="mb-2">
                                    <input type="hidden" name="action" value="invert">
                                    <button type="submit" class="btn btn-primary">Invert Colors</button>
                                </form>
                                <form method="post" class="mb-2">
                                    <input type="hidden" name="action" value="black_white">
                                    <button type="submit" class="btn btn-primary">Black & White</button>
                                </form>
                                <form method="post" class="mb-2">
                                    <input type="hidden" name="action" value="sepia">
                                    <button type="submit" class="btn btn-primary">Sepia</button>
                                </form>
                                <form method="post">
                                    <input type="hidden" name="action" value="edge_detection">
                                    <button type="submit" class="btn btn-primary">Edge Detection</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Blur -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#blurCollapse">
                                Blur
                            </button>
                        </h2>
                        <div id="blurCollapse" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                <form method="post">
                                    <input type="hidden" name="action" value="blur">
                                    <div class="mb-3">
                                        <label for="blur_radius" class="form-label">Blur Radius:</label>
                                        <input type="number" class="form-control" id="blur_radius" name="blur_radius" value="2" min="0" max="10" step="0.5">
                                    </div>
                                    <button type="submit" class="btn btn-primary">Apply Blur</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Brightness & Contrast -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#brightnessCollapse">
                                Brightness & Contrast
                            </button>
                        </h2>
                        <div id="brightnessCollapse" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                <form method="post">
                                    <input type="hidden" name="action" value="adjust">
                                    <div class="mb-3">
                                        <label for="brightness" class="form-label">Brightness:</label>
                                        <input type="number" class="form-control" id="brightness" name="brightness" value="1.0" min="0.1" max="2.0" step="0.1">
                                    </div>
                                    <div class="mb-3">
                                        <label for="contrast" class="form-label">Contrast:</label>
                                        <input type="number" class="form-control" id="contrast" name="contrast" value="1.0" min="0.1" max="2.0" step="0.1">
                                    </div>
                                    <button type="submit" class="btn btn-primary">Adjust</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Color Adjustment -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#colorCollapse">
                                Color Adjustment
                            </button>
                        </h2>
                        <div id="colorCollapse" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                <form method="post">
                                    <input type="hidden" name="action" value="adjust_color">
                                    <div class="mb-3">
                                        <label for="hue" class="form-label">Hue:</label>
                                        <input type="number" class="form-control" id="hue" name="hue" value="0" min="-180" max="180">
                                    </div>
                                    <div class="mb-3">
                                        <label for="saturation" class="form-label">Saturation:</label>
                                        <input type="number" class="form-control" id="saturation" name="saturation" value="1.0" min="0" max="2" step="0.1">
                                    </div>
                                    <div class="mb-3">
                                        <label for="red" class="form-label">Red:</label>
                                        <input type="number" class="form-control" id="red" name="red" value="1.0" min="0" max="2" step="0.1">
                                    </div>
                                    <div class="mb-3">
                                        <label for="green" class="form-label">Green:</label>
                                        <input type="number" class="form-control" id="green" name="green" value="1.0" min="0" max="2" step="0.1">
                                    </div>
                                    <div class="mb-3">
                                        <label for="blue" class="form-label">Blue:</label>
                                        <input type="number" class="form-control" id="blue" name="blue" value="1.0" min="0" max="2" step="0.1">
                                    </div>
                                    <button type="submit" class="btn btn-primary">Adjust Colors</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>